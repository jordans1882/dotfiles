function trim(a){return a.replace(/^\s*|\s*$/g,"")}function makequeryescape(a){a=a.replace(/&/gi,"%26");return a}function html_entity_decode(a){a=a.replace(/&amp;/gi,"&");a=a.replace(/&gt;/gi,">");a=a.replace(/&lt;/gi,"<");a=a.replace(/&quot;/gi,'"');a=a.replace(/&#039;/gi,"'");return a}function html_entity_encode(a){a=a.replace(/&/gi,"&amp;");a=a.replace(/>/gi,"&gt;");a=a.replace(/</gi,"&lt;");a=a.replace(/\"/gi,"&quot;");a=a.replace(/\'/gi,"&#039;");return a}function toBool(a){return("false"===a)?false:true}function get_domainfromurl(d){var j="";try{if(d&&d.trim()){var a=d.trim();var e=a.indexOf("//");if(e==-1){e=0}else{e+=2}if(e<a.length){var k=a.indexOf("/",e);if(k==-1){k=a.length}j=a.substring(e,k);if(!j||j.indexOf(".")==-1){j=""}}}}catch(i){}return j}function get_shorturl(d){try{if(d&&d.trim()){var a=d.trim();var e=a.indexOf("//");if(e==-1){e=0}else{e+=2}if(e<a.length){var k=a.indexOf("?",e);if(k==-1){k=a.lastIndexOf("/");if((k==-1)||(k<=e)){k=a.length}}var j=a.substring(e,k);if(!j||j.indexOf(".")==-1){j=""}}}}catch(i){}return j}function open_newtab(d,c,b){var a=false;if(toBool(localStorage.other_newtablast)){a=true;c=true}chrome.windows.getLastFocused(function(g){if(c||a||b||(g&&g.incognito)){}else{window.open(d);return}var f=true;if(b){f=false}var h={url:d,selected:f};function e(){chrome.tabs.create(h,function(i){if(i){chrome.windows.update(i.windowId,{focused:true})}})}if(!g){e()}if(g.type=="popup"){c=true}chrome.tabs.getSelected(g.id,function(i){if(i){if(c){}else{h.index=i.index+1}}e()})})}function open_newtab_exist2(d,a,c,b){if(toBool(localStorage.other_newtablast)){a=true}chrome.tabs.query({windowId:chrome.windows.WINDOW_ID_CURRENT},function(j){var h=d.toLowerCase();var f=get_shorturl(h);for(var g=0,l;l=j[g];g++){if(!l.url){continue}var k=l.url;k=k.toLowerCase();var e=get_shorturl(k);if(((e=="")&&(h!="")&&(k.indexOf(h)==0))||((e!="")&&(f!="")&&(e.indexOf(f)==0))){if(l.id!=c){if(b!=null){if(b){chrome.tabs.update(l.id,{url:d,active:true})}else{chrome.tabs.update(l.id,{active:true})}}else{chrome.tabs.update(l.id,{url:d,active:true})}return}}}open_newtab(d,a)})}function open_newtab_exist(d,a,b,c){if(toBool(localStorage.other_newtablast)){a=true}if(b){chrome.tabs.getSelected(null,function(e){open_newtab_exist2(d,a,e.id,c)})}else{open_newtab_exist2(d,a,-1,c)}}function getextensionUrl(a){if(typeof(chrome)=="undefined"){return"."+a}else{return chrome.extension.getURL(a)}}function open_newtab_extension(a,b){a=getextensionUrl(a);if(!b){b=false}open_newtab_exist(a,b,false)}function find_tab(c,a,b){if(toBool(localStorage.other_newtablast)){b=true}chrome.tabs.query({windowId:chrome.windows.WINDOW_ID_CURRENT},function(h){var g=c.toLowerCase();var e=get_shorturl(g);for(var f=0,k;k=h[f];f++){if(!k.url){continue}var j=k.url;j=j.toLowerCase();var d=get_shorturl(j);if(((d=="")&&(g==j))||((d!="")&&(e==d))){chrome.tabs.update(k.id,{active:a});return}}open_newtab(c,b)})}function getValue(b,a,c){a=a.toLowerCase();c=c.toLowerCase();ss=b.toLowerCase();p1=ss.indexOf(a);if(p1<0){return}s1=b.substr(p1+a.length,b.length);ss=s1.toLowerCase();p1=ss.indexOf(c);if(p1<0){return}s1=s1.substr(0,p1);return s1}function get_chrome_major_version(){var b=navigator.userAgent;b=getValue(b,"Chrome/"," ");if(b==null){b=""}b=b.split(".");var a=0;if(b.length>0){a=parseInt(b[0])}if(isNaN(a)){a=0}return a}var messagetimer=null;function show_message(c,a,g,f,d){if(!a){a=10}if(!g){g=10}if(!f){f=5}if(!d){d=2000}var b=1;var e=document.getElementById("layer_message");if(!e){var e=document.getElementById("layer_message2");if(!e){var e=document.getElementById("layer_message3");if(!e){return}b=3}else{b=2}}e.style.left="1px";e.style.top="1px";e.innerHTML="<label2>"+c+"</label2>";e.style.display="";if(b==1){a=document.body.scrollLeft+a;g=document.body.scrollTop+g}else{if(b==2){a=document.body.scrollLeft+((window.innerWidth-e.clientWidth)/2);g=document.body.scrollTop+((window.innerHeight-e.clientHeight)/2)}else{a=document.body.offsetWidth-e.clientWidth-5;g=document.body.scrollTop+g}}a=parseInt(a);g=parseInt(g);e.style.left=a+"px";e.style.top=g+"px";e.style["background-color"]="#FFFFE1";e.style.border="1px solid #000000";e.style.padding=f+"px";if(messagetimer){clearTimeout(messagetimer)}messagetimer=setTimeout(hide_message,d)}function hide_message(){var a=document.getElementById("layer_message");if(a){a.style.display="none"}var a=document.getElementById("layer_message2");if(a){a.style.display="none"}var a=document.getElementById("layer_message3");if(a){a.style.display="none"}}function changebox(b){var a=b.previousSibling;if(a){if(a.type=="checkbox"){a.checked=!a.checked;if(a.onchange){a.onchange()}if(a.onclick){a.onclick()}}}}function changeboxbyid(b){var a=document.getElementById(b);if(a){if(a.type=="checkbox"){a.checked=!a.checked;if(a.onchange){a.onchange()}if(a.onclick){a.onclick()}}}}function open_currenttab(c,a,b){chrome.windows.getLastFocused(function(e){var d=e.id;chrome.tabs.getSelected(d,function(f){chrome.tabs.update(f.id,{url:c,active:a});if(b!=null){b()}})})}function getparam(b,a){a=a+"=";a=a.toLowerCase();var d=b.toLowerCase().indexOf(a);if(d<0){return""}b=b.substr(d+a.length);var c=b.toLowerCase().indexOf("&");if(c>=0){return b.substr(0,c)}else{return b}}function fillnumber(a){a=String(a);if(a.length==1){return"0"+a}return a}function isurl_links(a){var c=/^(?:(ftp|http|https):\/\/)?(?:[\w-]+\.)+([a-z]{2,6}|[0-9]{1,6})/i;var b=c.test(a);if(!b){if(a.lastIndexOf("file:",0)===0){b=true}}return b}function cutstring(d,a){var b=0;for(var c=0;c<d.length;c++){if(ishangul(d[c])){b=b+2}else{b=b+1}if(b>=a){return d.substr(0,c)}}return d}function safegetlang(b,a){var c=chrome.i18n.getMessage(b);if(!c){c=a}return c}function toSafeString(a){if(a==null){return""}else{return a}}function _getid(a){return document.getElementById(a)}function _i18n(a){return chrome.i18n.getMessage(a)}function regex_decode(a){a=a.replace(/\\/gi,"\\\\");a=a.replace(/\^/gi,"\\^");a=a.replace(/\$/gi,"\\$");a=a.replace(/\*/gi,"\\*");a=a.replace(/\+/gi,"\\+");a=a.replace(/\?/gi,"\\?");a=a.replace(/\./gi,"\\.");a=a.replace(/\(/gi,"\\(");a=a.replace(/\)/gi,"\\)");a=a.replace(/\|/gi,"\\|");a=a.replace(/\{/gi,"\\{");a=a.replace(/\}/gi,"\\}");a=a.replace(/\[/gi,"\\[");a=a.replace(/\]/gi,"\\]");return a};