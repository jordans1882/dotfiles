var bgmodule=chrome.extension.getBackgroundPage();var gisdefault=false;var savedata=[];function set_notsaved(){document.getElementById("status").innerHTML="&nbsp;"+chrome.i18n.getMessage("conf_notsaved")}function set_saved(){document.getElementById("status").innerHTML="&nbsp;"+chrome.i18n.getMessage("conf_saved")}function saveOptions(){localStorage.reader_opentype=document.getElementById("reader_opentype").value;localStorage.reader_opentype2=document.getElementById("reader_opentype2").value;localStorage.other_newtablast=document.getElementById("other_newtablast").checked;localStorage.enable_sel_context=document.getElementById("enable_sel_context").checked;localStorage.enable_link_context=document.getElementById("enable_link_context").checked;localStorage.enable_page_context=document.getElementById("enable_page_context").checked;bgmodule.setStorageDefaults();bgmodule.proc_init();bgmodule.update_contextmenu();set_saved();show_message("<label2><font style='font-size:13px'>"+safegetlang("conf_saved","Has been saved")+"</font></label2>")}function closeoption(){chrome.windows.getLastFocused(function(b){var a=b.id;chrome.tabs.getSelected(a,function(c){chrome.tabs.remove(c.id)})})}function setdefault(){presetValues(true);set_notsaved()}function presetValues_bool(b,a,c){if(gisdefault){document.getElementById(b).checked=bgmodule.getStorageDefaults(a)}else{document.getElementById(b).checked=toBool(localStorage[a])}document.getElementById(b).onchange=function(){set_notsaved()}}function presetValues2(b,a,c){if(gisdefault){document.getElementById(b).value=bgmodule.getStorageDefaults(a)}else{document.getElementById(b).value=toSafeString(localStorage[a])}document.getElementById(b).onchange=function(){set_notsaved()}}function presetValues(a){gisdefault=a;presetValues2("reader_opentype","reader_opentype");presetValues2("reader_opentype2","reader_opentype2");presetValues_bool("other_newtablast","other_newtablast");presetValues_bool("enable_sel_context","enable_sel_context");presetValues_bool("enable_link_context","enable_link_context");presetValues_bool("enable_page_context","enable_page_context")}function other_onkeydown(f){var d=f.keyCode;var c=typeof f.modifiers=="undefined"?f.ctrlKey:f.modifiers&Event.CONTROL_MASK;var b=typeof f.modifiers=="undefined"?f.altKey:f.modifiers&Event.ALT_MASK;var a=typeof f.modifiers=="undefined"?f.shiftKey:f.modifiers&Event.SHIFT_MASK;if(b){if(d==112){saveOptions();f.preventDefault();f.stopPropagation();f.returnValue=false;return}}}function proc_setlang(){var b=document.getElementsByTagName("*");var f,e,c;for(var d=0;d<b.length;d++){if(b[d].id=="i18n"){f=b[d].title;b[d].title="";if(!f){continue}if(f.indexOf("$")>=0){while(true){e=getValue(f,"$","$");if(!e||(e=="")){break}c=chrome.i18n.getMessage(e);if(!c){f="";break}f=f.replace("$"+e+"$",c)}}else{f=chrome.i18n.getMessage(f)}if(f){f=f.replace(/(\r\n|\n\r|\r|\n)/g,"<br>");b[d].innerHTML=f}}}}function init(){proc_setlang();presetValues(false);document.addEventListener("keydown",other_onkeydown,true)}function proc_onload(){_getid("fix1_1").href="https://chrome.google.com/webstore/detail/"+bgmodule.g_extensionid+"?hl="+window.navigator.language;_getid("fix1_2").href="https://chrome.google.com/webstore/detail/"+bgmodule.g_extensionid+"?hl="+window.navigator.language;_getid("fix1_3").href=bgmodule.get_readerurl(true);_getid("fix1_4").href=bgmodule.get_readerurl()+"http://partners.adobe.com/public/developer/en/xml/AdobeXMLFormsSamples.pdf";_getid("btn_saveOptions1").onclick=saveOptions;_getid("btn_closeoption1").onclick=closeoption;_getid("btn_setdefault1").onclick=setdefault;init()}window.onload=proc_onload;function windowonresize(){var a=document.getElementById("layer_message");if(a){a.style.display="none"}var a=document.getElementById("layer_message2");if(a){a.style.display="none"}var a=document.getElementById("layer_message3");if(a){a.style.display="none"}}window.onresize=windowonresize;