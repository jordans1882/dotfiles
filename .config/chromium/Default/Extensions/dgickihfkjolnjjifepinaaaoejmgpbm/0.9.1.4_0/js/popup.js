var bgmodule=chrome.extension.getBackgroundPage();function feedLink(a){var b=document.createElement("a");b.href=a;b.addEventListener("click",onClick);return b}function main(){_getid("heading").innerHTML=safegetlang("msg_Loading","Loading")+"...";chrome.tabs.getSelected(function(a){chrome.storage.local.get(a.id.toString(),function(o){var m=o[a.id];if(m.length==1){preview(m[0].href)}else{var h=document.getElementById("content");var n=document.getElementById("heading");n.innerText=chrome.i18n.getMessage("msg_subscription_title");h.appendChild(document.createElement("br"));var l=document.createElement("table");l.style.width="400";for(var f=0;f<m.length;++f){var e=feedLink(m[f].href);var g=document.createElement("img");g.src="images/icon16.png";e.appendChild(g);var b=feedLink(m[f].href);b.appendChild(document.createTextNode(m[f].title));var j=document.createElement("tr");j.className="feedList";var d=document.createElement("td");d.width="16";d.appendChild(e);var c=document.createElement("td");c.appendChild(b);j.appendChild(d);j.appendChild(c);l.appendChild(j)}h.appendChild(l);var k=_getid("btn_all");k.style.display="";k.onclick=proc_all}})})}function onClick(c){var b=c.currentTarget;preview(b.href)}function proc_all(){var f=_getid("content");var d=f.getElementsByTagName("IMG");var c=[];for(var e=0;e<d.length;e++){if(d[e].parentNode&&d[e].parentNode.href){c.push(d[e].parentNode.href)}}preview(c.join("\n"))}function preview(b){var a="";a=bgmodule.get_readerurl()+encodeURIComponent(b);bgmodule.proc_open(a)}document.addEventListener("DOMContentLoaded",main);